<app-header></app-header>
<mat-toolbar-row class="toolbar-row">
    <div>
        <h1>The Hamster Huddle Forum</h1>
        <mat-chip-listbox class="chip-set" multiple>
            <mat-chip-option>Rainbow Bridge</mat-chip-option>
            <mat-chip-option>Setup Tour</mat-chip-option>
            <mat-chip-option>Discussions</mat-chip-option>
            <mat-chip-option>Funny Hammy</mat-chip-option>
            <mat-chip-option>Cute Hammy</mat-chip-option>
        </mat-chip-listbox>
    </div>
    <button mat-icon-button (click)="toggleEditting()">
        <mat-icon>add</mat-icon>
    </button>
</mat-toolbar-row>
<div class = "content">
    <div *ngIf="editting" class="post-editor">
        <mat-card class = "post-card">
            <h2>Create a Post</h2>
            <form>
                <mat-form-field class="full-width">
                  <input matInput placeholder="Title" name="title" [(ngModel)]="this.title">
                </mat-form-field>
                <br>
                <mat-form-field class="full-width">
                  <textarea matInput placeholder="Content" name="content" [(ngModel)]="this.content"></textarea>
                </mat-form-field>
                <mat-chip-listbox class="chip-set" multiple>
                    <mat-chip-option (click) = "tagSet('Rainbow Bridge')">Rainbow Bridge</mat-chip-option>
                    <mat-chip-option (click) = "tagSet('Setup Tour')">Setup Tour</mat-chip-option>
                    <mat-chip-option (click) = "tagSet('Discussions')">Discussions</mat-chip-option>
                    <mat-chip-option (click) = "tagSet('Funny Hammy')">Funny Hammy</mat-chip-option>
                    <mat-chip-option (click) = "tagSet('Cute Hammy')">Cute Hammy</mat-chip-option>
                </mat-chip-listbox>
                <div class="toolbar">
                    <mat-toolbar-row>
                        <button mat-button extended type="submit" color="primary"(click)="sendPost()">
                            <mat-icon>post_add</mat-icon>
                            Post
                        </button>
                        <button mat-button extended color="primary" (click)="toggleEditting()">
                            <mat-icon>cancel</mat-icon>
                            Cancel
                        </button>
                    </mat-toolbar-row>
                </div>  
              </form>
        </mat-card>
    </div>
    <!-- BODY -->
    <div *ngFor="let post of paginatedPosts" class="post-container">
        <mat-card class="post-card">
          <div class="post-header">
            <mat-card-header>
              <mat-card-title>{{ post.title }}</mat-card-title>
              <mat-card-subtitle>by {{ post.author }}</mat-card-subtitle>
            </mat-card-header>
            <button mat-icon-button class="view-discussion-button" [routerLink]="['/post', post.title]">
                <mat-icon>open_in_new</mat-icon>
            </button>
          </div>
          <mat-card-content>
            <p>{{ post.showFullContent ? post.content : "" }}</p>
            <mat-chip-listbox>
              <mat-chip *ngFor="let tag of post.tags">{{ tag }}</mat-chip>
            </mat-chip-listbox>
          </mat-card-content>
          <mat-card-actions>
            <button mat-button (click)="toggleContent(post)">
              {{ post.showFullContent ? 'Read Less' : 'Read More' }}
            </button>
          </mat-card-actions>
        </mat-card>
      </div>
      <mat-paginator [length]="samplePost.length" [pageSize]="pageSize" [pageSizeOptions]="[5, 10, 20]" (page)="handlePageEvent($event)"></mat-paginator>      
</div>
